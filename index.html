
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Fox Driving Game</title>
<style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; margin: 0 auto; background: url('https://i.imgur.com/pj2lc2g.png'); background-size: cover; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 360;
canvas.height = 640;

let foxImg = new Image();
foxImg.src = 'https://i.imgur.com/0wmMQJJ.png';

let poopImg = new Image();
poopImg.src = 'https://i.imgur.com/AgEh2ev.png';

let honeyImg = new Image();
honeyImg.src = 'https://i.imgur.com/8wFZQR1.png';

let vipImg = new Image();
vipImg.src = 'https://i.imgur.com/4JQsYja.png';

let angryImg = new Image();
angryImg.src = 'https://i.imgur.com/yuZn35z.png';

let tipImg = new Image();
tipImg.src = 'https://i.imgur.com/hJIFKB6.png';

let fox = { x: canvas.width / 2 - 25, y: canvas.height - 70, width: 50, height: 50 };
let items = [];
let score = 0;
let timeLeft = 60;
let gameSpeed = 2;

function spawnItem() {
    const types = [
        { img: poopImg, value: -10000, chance: 0.4 },
        { img: honeyImg, value: 1000, chance: 0.4 },
        { img: vipImg, value: 10000, chance: 0.05 },
        { img: angryImg, value: -20000, chance: 0.1 },
        { img: tipImg, value: 2000, chance: 0.05 },
    ];
    let rand = Math.random();
    let sum = 0;
    for (let type of types) {
        sum += type.chance;
        if (rand < sum) {
            items.push({
                img: type.img,
                x: Math.random() * (canvas.width - 30),
                y: -30,
                width: 30,
                height: 30,
                value: type.value
            });
            break;
        }
    }
}

document.addEventListener('touchmove', function(e) {
    fox.x = e.touches[0].clientX - fox.width / 2;
});

function updateGameSpeed() {
    if (timeLeft <= 10) gameSpeed = 8;
    else if (timeLeft <= 20) gameSpeed = 6;
    else if (timeLeft <= 30) gameSpeed = 4;
    else if (timeLeft <= 50) gameSpeed = 3;
}

function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(foxImg, fox.x, fox.y, fox.width, fox.height);

    for (let item of items) {
        item.y += gameSpeed;
        ctx.drawImage(item.img, item.x, item.y, item.width, item.height);
        if (item.y + item.height > fox.y && item.x < fox.x + fox.width && item.x + item.width > fox.x) {
            score += item.value;
            items.splice(items.indexOf(item), 1);
        } else if (item.y > canvas.height) {
            items.splice(items.indexOf(item), 1);
        }
    }

    ctx.fillStyle = 'white';
    ctx.font = '20px Arial';
    ctx.fillText('오늘의 매출: ' + score + '원', 10, 30);
    ctx.fillText('남은 시간: ' + timeLeft + '초', 10, 60);

    updateGameSpeed();
    if (timeLeft > 0) requestAnimationFrame(gameLoop);
    else ctx.fillText('게임 종료!', canvas.width / 2 - 50, canvas.height / 2);
}

setInterval(spawnItem, 800);
setInterval(() => { if (timeLeft > 0) timeLeft--; }, 1000);
gameLoop();
</script>
</body>
</html>
