
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Fox Driving Game</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #222;
    }
    canvas {
        display: block;
        margin: 0 auto;
        background: url('https://imgur.com/pj2lc2g.png') no-repeat center center;
        background-size: cover;
    }
</style>
</head>
<body>
<canvas id="gameCanvas" width="1080" height="1920"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const foxImg = new Image();
foxImg.src = 'https://i.imgur.com/0wmMQJJ.png';
const poopImg = new Image();
poopImg.src = 'https://i.imgur.com/H6RmSzx.png';
const honeyImg = new Image();
honeyImg.src = 'https://i.imgur.com/8wFZQR1.png';
const vipImg = new Image();
vipImg.src = 'https://i.imgur.com/4JQsYja.png';
const angryImg = new Image();
angryImg.src = 'https://i.imgur.com/yuZn35z.png';
const tipImg = new Image();
tipImg.src = 'https://i.imgur.com/hJIFKB6.png';

let foxX = canvas.width / 2 - 50;
let foxY = canvas.height - 150;
let score = 0;
let time = 60;
let speedMultiplier = 1;
let items = [];

function spawnItem() {
    const typeChance = Math.random();
    let type = 'poop';
    if (typeChance < 0.05) type = 'vip';
    else if (typeChance < 0.25) type = Math.random() < 0.5 ? 'angry' : 'tip';
    else if (typeChance < 0.65) type = 'honey';

    items.push({
        x: Math.random() * (canvas.width - 50),
        y: -50,
        type: type
    });
}

function update() {
    time -= 1 / 60;
    if (time <= 0) {
        alert('게임 종료! 최종 매출: ' + score + '원');
        document.location.reload();
    }

    if (time <= 10) speedMultiplier = 4;
    else if (time <= 20) speedMultiplier = 3;
    else if (time <= 30) speedMultiplier = 2;
    else if (time <= 50) speedMultiplier = 1.5;

    items.forEach(item => item.y += 4 * speedMultiplier);

    items = items.filter(item => {
        if (item.y > canvas.height) return false;
        if (
            item.x < foxX + 100 &&
            item.x + 50 > foxX &&
            item.y < foxY + 100 &&
            item.y + 50 > foxY
        ) {
            if (item.type === 'poop') score -= 10000;
            else if (item.type === 'honey') score += 1000;
            else if (item.type === 'vip') score += 10000;
            else if (item.type === 'angry') score -= 20000;
            else if (item.type === 'tip') score += 2000;
            return false;
        }
        return true;
    });
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(foxImg, foxX, foxY, 100, 100);

    items.forEach(item => {
        let img = poopImg;
        if (item.type === 'honey') img = honeyImg;
        else if (item.type === 'vip') img = vipImg;
        else if (item.type === 'angry') img = angryImg;
        else if (item.type === 'tip') img = tipImg;
        ctx.drawImage(img, item.x, item.y, 50, 50);
    });

    ctx.fillStyle = 'white';
    ctx.font = '48px Arial';
    ctx.fillText('매출: ' + score + '원', 20, 60);
    ctx.fillText('남은시간: ' + Math.floor(time), 20, 120);
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

canvas.addEventListener('touchstart', function(e) {
    foxX = e.touches[0].clientX - 50;
});

setInterval(spawnItem, 500);
gameLoop();
</script>
</body>
</html>
